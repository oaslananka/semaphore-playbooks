---
- name: Sistem ZamanÄ± ve AÄŸ KontrolÃ¼
  hosts: all
  become: true
  gather_facts: no

  tasks:
    - name: ğŸ•’ Sistem zamanÄ± kontrol
      command: timedatectl
      register: time_output

    - name: Zaman Ã§Ä±ktÄ±sÄ±nÄ± yazdÄ±r
      debug:
        var: time_output.stdout_lines

    - name: ğŸ” NTP senkronizasyon durumu
      shell: timedatectl show -p NTPSynchronized --value
      register: ntp_sync

    - name: NTP senkronizasyon sonucu
      debug:
        msg: "NTP senkronizasyonu: {{ ntp_sync.stdout }}"

    - name: ğŸŒ Google DNSâ€™e ping at (internet baÄŸlantÄ± kontrolÃ¼)
      command: ping -c 3 8.8.8.8
      register: ping_result
      ignore_errors: true

    - name: Ping sonucu
      debug:
        var: ping_result.stdout_lines

    - name: ğŸ›  RTC yerel saat olarak ayarlÄ± mÄ±? (uyarÄ± varsa dÃ¼zelt)
      command: timedatectl set-local-rtc 0 --adjust-system-clock
      when: "'RTC in local TZ: yes' in time_output.stdout"
